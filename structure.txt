zaio_app_v2/
├── main.py
├── log_view_controller.py
├── run.ipynb
├── 文件结构说明.txt（本文件）
│
├── assets/
│   ├── ZH80.ttf
│   ├── bottom_gradient.png
│   ├── doll_off.png
│   ├── doll_on.png
│   ├── side_gradient.png
│   └── top_gradient.png
│
├── config/
│   ├── api_key.txt
│   └── settings.yaml
│
├── core/
│   ├── __init__.py
│   ├── first_turn.py        ← 第一拍开场引擎
│   └── orchestrator.py      ← 我们刚刚改的数据流总控
│
├── data/
│   ├── current_state_snapshot.json
│   ├── tree_default.json
│   ├── logs/
│   │   └── ...（每天的对话日志，对应 对话_日期.txt）
│   ├── perspective_trees/
│   │   └── ...（观点树 JSON）
│   └── prompt_logs/
│       ├── llm_prompt_log.txt
│       └── llm_trigger_log.txt
│
├── llm/
│   ├── __init__.py
│   └── client.py            ← 所有 LLM 调用入口（role → prompt_map）
│
├── persona/
│   ├── __init__.py
│   ├── fast_engine.py       ← Q-Engine（快人格）
│   ├── slow_engine.py       ← T-Engine（慢人格）
│   ├── direct_engine.py     ← L-Engine（直答人格）
│   ├── deep_engine.py        ← D-Engine（描绘人格）
│   └── sum_engine.py        ← SUM-Engine（总结人格）
│
├── state/
│   ├── __init__.py
│   ├── history_manager.py   ← 对话历史管理
│   ├── snapshot_manager.py  ← current_state_snapshot 的读写
│   └── user_profile.py      ← 用户长期画像
│
├── thinking/
│   ├── __init__.py
│   ├── behavior_selector.py           ← 现在已经不负责选引擎了，只是历史遗留
│   ├── guess_engine.py
│   ├── perspective_generate_engine.py ← 观点树生成引擎
│   └── perspective_tree.py            ← 运行时观点树结构与操作
│
├── trigger/
│   ├── __init__.py
│   ├── engine_select_trigger.py       ← ✅ 现在真正的 Q/T/L/SUM 选择器
│   ├── perspective_move_trigger.py    ← T 引擎内部，决定怎么看树 / 跳节点
│   ├── state_update_trigger.py        ← 更新 snapshot 的 LLM 触发器
│   ├── talk_trigger.py                ← “要不要说话”的触发器
│   └── timing_engine.py               ← 非 LLM 的节奏/冷却引擎
│
└── ui/
    └── __init__.py    ← DearPyGUI 的 UI 逻辑（chat 窗口、娃娃、按钮等）